import{_ as a,z as s,m as l,ap as e}from"./chunks/framework.BJGaVzEf.js";const u=JSON.parse('{"title":"常见问题","description":"","frontmatter":{},"headers":[],"relativePath":"markdown/guide/faq.md","filePath":"markdown/guide/faq.md","lastUpdated":1771239428000}'),t={name:"markdown/guide/faq.md"};function o(n,i,h,r,p,d){return l(),s("div",null,[...i[0]||(i[0]=[e(`<h1 id="常见问题" tabindex="-1">常见问题 <a class="header-anchor" href="#常见问题" aria-label="Permalink to &quot;常见问题&quot;">​</a></h1><p>本页面收集了使用 GitHub 适配器时的常见问题和解决方案。</p><h2 id="安装和配置" tabindex="-1">安装和配置 <a class="header-anchor" href="#安装和配置" aria-label="Permalink to &quot;安装和配置&quot;">​</a></h2><h3 id="q-如何获取-github-token" tabindex="-1">Q: 如何获取 GitHub Token？ <a class="header-anchor" href="#q-如何获取-github-token" aria-label="Permalink to &quot;Q: 如何获取 GitHub Token？&quot;">​</a></h3><p>A: 请参考 <a href="/koishi-plugin-adapter-github/markdown/guide/start.html">快速开始</a> 中的详细步骤。简要流程：</p><ol><li>访问 <a href="https://github.com/settings/tokens" target="_blank" rel="noreferrer">GitHub Token 设置页面</a></li><li>生成 Classic Token</li><li>勾选必要的权限（repo, read:user, read:discussion, write:discussion）</li><li>复制并保存 Token</li></ol><h3 id="q-token-需要哪些权限" tabindex="-1">Q: Token 需要哪些权限？ <a class="header-anchor" href="#q-token-需要哪些权限" aria-label="Permalink to &quot;Q: Token 需要哪些权限？&quot;">​</a></h3><p>A: 必需的权限：</p><ul><li><code>repo</code> - 访问仓库和创建评论</li><li><code>read:user</code> - 读取用户信息</li><li><code>read:discussion</code> - 读取 Discussions</li><li><code>write:discussion</code> - 发表 Discussion 评论</li></ul><h3 id="q-可以同时监听多个仓库吗" tabindex="-1">Q: 可以同时监听多个仓库吗？ <a class="header-anchor" href="#q-可以同时监听多个仓库吗" aria-label="Permalink to &quot;Q: 可以同时监听多个仓库吗？&quot;">​</a></h3><p>A: 可以。在 Pull 模式下，可以在配置中添加多个仓库：</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">  &quot;mode&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;pull&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">  &quot;repositories&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    { </span><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">&quot;owner&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;user1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">&quot;repo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;repo1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    { </span><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">&quot;owner&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;user2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">&quot;repo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;repo2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">提示</p><p>仓库列表配置仅在 Pull 模式下需要配置。</p></div><h3 id="q-什么是静默模式" tabindex="-1">Q: 什么是静默模式？ <a class="header-anchor" href="#q-什么是静默模式" aria-label="Permalink to &quot;Q: 什么是静默模式？&quot;">​</a></h3><p>A: 静默模式是一个安全功能，开启后适配器只接收 GitHub 事件，不会向 GitHub 发送任何内容（如评论、回复等）。</p><p>适用场景：</p><ul><li>测试和调试环境</li><li>只需要监听事件而不需要回复</li><li>避免误操作的保护模式</li></ul><p>配置方法：</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">  &quot;silentMode&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><p>详见：<a href="/koishi-plugin-adapter-github/markdown/guide/config.html#silentmode">配置说明 - 静默模式</a></p><hr><h2 id="通信模式" tabindex="-1">通信模式 <a class="header-anchor" href="#通信模式" aria-label="Permalink to &quot;通信模式&quot;">​</a></h2><h3 id="q-pull-模式和-webhook-模式有什么区别" tabindex="-1">Q: Pull 模式和 Webhook 模式有什么区别？ <a class="header-anchor" href="#q-pull-模式和-webhook-模式有什么区别" aria-label="Permalink to &quot;Q: Pull 模式和 Webhook 模式有什么区别？&quot;">​</a></h3><p>A: 主要区别：</p><table tabindex="0"><thead><tr><th>特性</th><th>Pull 模式</th><th>Webhook 模式</th></tr></thead><tbody><tr><td>公网 IP</td><td>不需要</td><td>需要</td></tr><tr><td>实时性</td><td>较差</td><td>实时</td></tr><tr><td>事件支持</td><td>部分受限</td><td>完整支持</td></tr><tr><td>代理支持</td><td>支持</td><td>不支持</td></tr></tbody></table><p>详见：<a href="/koishi-plugin-adapter-github/markdown/mode/pull.html">Pull 模式</a> 和 <a href="/koishi-plugin-adapter-github/markdown/mode/webhook.html">Webhook 模式</a></p><h3 id="q-如何选择通信模式" tabindex="-1">Q: 如何选择通信模式？ <a class="header-anchor" href="#q-如何选择通信模式" aria-label="Permalink to &quot;Q: 如何选择通信模式？&quot;">​</a></h3><p>A: 建议：</p><ul><li><strong>本地开发/内网环境</strong>：使用 Pull 模式</li><li><strong>生产环境/有公网 IP</strong>：使用 Webhook 模式</li><li><strong>需要代理访问</strong>：使用 Pull 模式</li><li><strong>需要 Discussion 事件</strong>：使用 Webhook 模式</li></ul><h3 id="q-pull-模式收不到-discussion-事件" tabindex="-1">Q: Pull 模式收不到 Discussion 事件？ <a class="header-anchor" href="#q-pull-模式收不到-discussion-事件" aria-label="Permalink to &quot;Q: Pull 模式收不到 Discussion 事件？&quot;">​</a></h3><p>A: 这是正常的。GitHub Events API 不支持 Discussion 事件，只能通过 Webhook 模式接收。</p><hr><h2 id="连接问题" tabindex="-1">连接问题 <a class="header-anchor" href="#连接问题" aria-label="Permalink to &quot;连接问题&quot;">​</a></h2><h3 id="q-收不到任何消息" tabindex="-1">Q: 收不到任何消息？ <a class="header-anchor" href="#q-收不到任何消息" aria-label="Permalink to &quot;Q: 收不到任何消息？&quot;">​</a></h3><p>A: 请按以下步骤排查：</p><ol><li><p><strong>检查 Token 权限</strong></p><ul><li>确保 Token 具有必要的权限</li><li>尝试重新生成 Token</li></ul></li><li><p><strong>检查仓库配置</strong></p><ul><li>确认 owner 和 repo 名称正确</li><li>确认有权限访问该仓库</li></ul></li><li><p><strong>检查日志</strong></p><ul><li>开启 <code>loggerinfo</code> 选项</li><li>查看控制台日志中的错误信息</li></ul></li><li><p><strong>验证连接</strong></p><ul><li>查看机器人是否成功上线</li><li>检查是否有 API 错误</li></ul></li></ol><h3 id="q-webhook-模式无法接收消息" tabindex="-1">Q: Webhook 模式无法接收消息？ <a class="header-anchor" href="#q-webhook-模式无法接收消息" aria-label="Permalink to &quot;Q: Webhook 模式无法接收消息？&quot;">​</a></h3><p>A: 请检查：</p><ol><li><p><strong>服务器可访问性</strong></p><ul><li>确保服务器有公网 IP</li><li>确保端口已开放</li><li>尝试访问 <code>http://你的服务器:端口/github/webhook</code></li></ul></li><li><p><strong>Webhook 配置</strong></p><ul><li>在 GitHub 仓库设置中检查 Webhook 状态</li><li>查看 Webhook 推送记录和错误信息</li><li>确认 Webhook URL 正确</li></ul></li><li><p><strong>密钥验证</strong></p><ul><li>确保插件配置的 <code>webhookSecret</code> 与 GitHub 配置一致</li><li>如果不使用密钥，两边都不要配置</li></ul></li></ol><h3 id="q-代理无法连接" tabindex="-1">Q: 代理无法连接？ <a class="header-anchor" href="#q-代理无法连接" aria-label="Permalink to &quot;Q: 代理无法连接？&quot;">​</a></h3><p>A: 请检查：</p><ul><li>代理服务是否正在运行</li><li>代理端口是否正确</li><li>代理协议是否正确（http/https）</li><li>尝试使用 curl 测试代理</li></ul><p>详见：<a href="/koishi-plugin-adapter-github/markdown/mode/proxy.html">代理配置</a></p><h3 id="q-pull-模式频繁出现网络错误" tabindex="-1">Q: Pull 模式频繁出现网络错误？ <a class="header-anchor" href="#q-pull-模式频繁出现网络错误" aria-label="Permalink to &quot;Q: Pull 模式频繁出现网络错误？&quot;">​</a></h3><p>A: 适配器已优化网络错误处理，临时性错误（如 500/502/503、EHOSTUNREACH 等）会自动降级为警告，不会中断服务。</p><p>如果频繁出现网络错误，建议：</p><ol><li><strong>检查网络连接</strong>：确保网络稳定</li><li><strong>配置代理</strong>：如果访问 GitHub 不稳定，可以配置代理</li><li><strong>增加轮询间隔</strong>：减少请求频率，降低网络压力</li><li><strong>查看日志</strong>：开启 <a href="./../guide/config.html#loggerinfo"><code>loggerinfo</code></a> 查看详细错误信息</li></ol><p>详见：<a href="/koishi-plugin-adapter-github/markdown/mode/pull.html#错误处理优化">Pull 模式 - 错误处理优化</a></p><hr><h2 id="api-和功能" tabindex="-1">API 和功能 <a class="header-anchor" href="#api-和功能" aria-label="Permalink to &quot;API 和功能&quot;">​</a></h2><h3 id="q-如何发送消息到-issue" tabindex="-1">Q: 如何发送消息到 Issue？ <a class="header-anchor" href="#q-如何发送消息到-issue" aria-label="Permalink to &quot;Q: 如何发送消息到 Issue？&quot;">​</a></h3><p>A: 使用 <code>sendMessage</code> 方法：</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> channelId</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;owner/repo:issues:123&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> bot</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sendMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">channelId</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;消息内容&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><p>详见：<a href="/koishi-plugin-adapter-github/markdown/dev/apis.html">API 接口</a></p><h3 id="q-如何监听特定的-github-事件" tabindex="-1">Q: 如何监听特定的 GitHub 事件？ <a class="header-anchor" href="#q-如何监听特定的-github-事件" aria-label="Permalink to &quot;Q: 如何监听特定的 GitHub 事件？&quot;">​</a></h3><p>A: 使用 <code>ctx.on</code> 监听事件：</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">ctx</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;github/issue-opened&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, (</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // 处理 Issue 创建事件</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">})</span></span></code></pre></div><p>详见：<a href="/koishi-plugin-adapter-github/markdown/dev/events.html">事件系统</a> 和 <a href="/koishi-plugin-adapter-github/markdown/dev/listen-events.html">监听事件示例</a></p><h3 id="q-频道-id-是什么格式" tabindex="-1">Q: 频道 ID 是什么格式？ <a class="header-anchor" href="#q-频道-id-是什么格式" aria-label="Permalink to &quot;Q: 频道 ID 是什么格式？&quot;">​</a></h3><p>A: 频道 ID 格式为：<code>owner/repo:type:number</code></p><p>示例：</p><ul><li>Issue: <code>owner/repo:issues:123</code></li><li>PR: <code>owner/repo:pull:456</code></li><li>Discussion: <code>owner/repo:discussions:789</code></li></ul><p>详见：<a href="/koishi-plugin-adapter-github/markdown/dev/channel-id.html">频道 ID 说明</a></p><hr><h2 id="错误处理" tabindex="-1">错误处理 <a class="header-anchor" href="#错误处理" aria-label="Permalink to &quot;错误处理&quot;">​</a></h2><h3 id="q-出现-api-rate-limit-exceeded-错误" tabindex="-1">Q: 出现 &quot;API rate limit exceeded&quot; 错误？ <a class="header-anchor" href="#q-出现-api-rate-limit-exceeded-错误" aria-label="Permalink to &quot;Q: 出现 &quot;API rate limit exceeded&quot; 错误？&quot;">​</a></h3><p>A: 这是 GitHub API 速率限制。解决方法：</p><ul><li><strong>Pull 模式</strong>：增大轮询间隔</li><li><strong>Webhook 模式</strong>：不受此限制</li><li>等待配额重置（每小时重置）</li><li>检查是否有其他程序在使用同一 Token</li></ul><h3 id="q-出现-bad-credentials-错误" tabindex="-1">Q: 出现 &quot;Bad credentials&quot; 错误？ <a class="header-anchor" href="#q-出现-bad-credentials-错误" aria-label="Permalink to &quot;Q: 出现 &quot;Bad credentials&quot; 错误？&quot;">​</a></h3><p>A: Token 无效或已过期。解决方法：</p><ul><li>检查 Token 是否正确复制</li><li>重新生成 Token</li><li>确认 Token 未被撤销</li></ul><h3 id="q-出现-not-found-错误" tabindex="-1">Q: 出现 &quot;Not Found&quot; 错误？ <a class="header-anchor" href="#q-出现-not-found-错误" aria-label="Permalink to &quot;Q: 出现 &quot;Not Found&quot; 错误？&quot;">​</a></h3><p>A: 仓库不存在或无权访问。解决方法：</p><ul><li>检查仓库名称是否正确</li><li>确认 Token 有权限访问该仓库</li><li>检查仓库是否为私有仓库</li></ul><h3 id="q-消息发送失败" tabindex="-1">Q: 消息发送失败？ <a class="header-anchor" href="#q-消息发送失败" aria-label="Permalink to &quot;Q: 消息发送失败？&quot;">​</a></h3><p>A: 可能的原因：</p><ul><li><strong>静默模式已开启</strong>：检查 <a href="./../guide/config.html#silentmode"><code>silentMode</code></a> 配置</li><li>Token 权限不足</li><li>频道 ID 格式错误</li><li>Issue/PR 已关闭或删除</li><li>网络连接问题</li></ul><div class="tip custom-block"><p class="custom-block-title">提示</p><p>如果开启了静默模式，所有发送消息的操作都会被阻止。</p></div><hr><h2 id="性能优化" tabindex="-1">性能优化 <a class="header-anchor" href="#性能优化" aria-label="Permalink to &quot;性能优化&quot;">​</a></h2><h3 id="q-如何减少-api-请求次数" tabindex="-1">Q: 如何减少 API 请求次数？ <a class="header-anchor" href="#q-如何减少-api-请求次数" aria-label="Permalink to &quot;Q: 如何减少 API 请求次数？&quot;">​</a></h3><p>A: 建议：</p><ul><li>增大 Pull 模式的轮询间隔</li><li>使用 Webhook 模式（不消耗 API 配额）</li><li>减少监听的仓库数量</li><li>避免频繁调用 API</li></ul><h3 id="q-如何提高实时性" tabindex="-1">Q: 如何提高实时性？ <a class="header-anchor" href="#q-如何提高实时性" aria-label="Permalink to &quot;Q: 如何提高实时性？&quot;">​</a></h3><p>A: 建议：</p><ul><li>使用 Webhook 模式</li><li>减小 Pull 模式的轮询间隔（注意 API 配额）</li></ul><hr><h2 id="其他问题" tabindex="-1">其他问题 <a class="header-anchor" href="#其他问题" aria-label="Permalink to &quot;其他问题&quot;">​</a></h2><h3 id="q-支持-github-enterprise-吗" tabindex="-1">Q: 支持 GitHub Enterprise 吗？ <a class="header-anchor" href="#q-支持-github-enterprise-吗" aria-label="Permalink to &quot;Q: 支持 GitHub Enterprise 吗？&quot;">​</a></h3><p>A: 目前不支持。适配器使用的是 GitHub.com 的 API。</p><h3 id="q-可以监听私有仓库吗" tabindex="-1">Q: 可以监听私有仓库吗？ <a class="header-anchor" href="#q-可以监听私有仓库吗" aria-label="Permalink to &quot;Q: 可以监听私有仓库吗？&quot;">​</a></h3><p>A: 可以。确保 Token 具有 <code>repo</code> 权限即可。</p><h3 id="q-如何获取更多帮助" tabindex="-1">Q: 如何获取更多帮助？ <a class="header-anchor" href="#q-如何获取更多帮助" aria-label="Permalink to &quot;Q: 如何获取更多帮助？&quot;">​</a></h3><p>A: 可以通过以下方式：</p><ul><li>查看 <a href="https://github.com/koishi-shangxue-plugins/koishi-plugin-adapter-github" target="_blank" rel="noreferrer">GitHub 仓库</a></li><li>提交 <a href="https://github.com/koishi-shangxue-plugins/koishi-plugin-adapter-github/issues" target="_blank" rel="noreferrer">Issue</a></li><li>查看 <a href="https://koishi.chat/" target="_blank" rel="noreferrer">Koishi 官方文档</a></li></ul>`,95)])])}const c=a(t,[["render",o]]);export{u as __pageData,c as default};
