import{_ as i,z as a,m as t,ap as e}from"./chunks/framework.BJGaVzEf.js";const d=JSON.parse('{"title":"Webhook 模式","description":"","frontmatter":{},"headers":[],"relativePath":"markdown/mode/webhook.md","filePath":"markdown/mode/webhook.md","lastUpdated":1771239428000}'),o={name:"markdown/mode/webhook.md"};function n(l,s,h,r,p,k){return t(),a("div",null,[...s[0]||(s[0]=[e(`<h1 id="webhook-模式" tabindex="-1">Webhook 模式 <a class="header-anchor" href="#webhook-模式" aria-label="Permalink to &quot;Webhook 模式&quot;">​</a></h1><p>Webhook 模式通过 GitHub 的 Webhook 功能实时接收事件推送，提供最佳的实时性和完整的事件支持。</p><h2 id="工作原理" tabindex="-1">工作原理 <a class="header-anchor" href="#工作原理" aria-label="Permalink to &quot;工作原理&quot;">​</a></h2><ol><li>在 GitHub 仓库中配置 Webhook，指向你的 Koishi 服务器</li><li>当仓库发生事件时，GitHub 主动推送事件数据到你的服务器</li><li>适配器接收并验证请求，转换为 Koishi 消息并派发</li></ol><h2 id="前置要求" tabindex="-1">前置要求 <a class="header-anchor" href="#前置要求" aria-label="Permalink to &quot;前置要求&quot;">​</a></h2><p>✅ <strong>公网 IP 或域名</strong> - GitHub 需要能够访问你的服务器</p><p>✅ <strong>开放端口</strong> - 确保 Koishi 的端口可以从外网访问</p><p>✅ <strong>HTTPS（推荐）</strong> - 生产环境建议使用 HTTPS</p><h2 id="配置步骤" tabindex="-1">配置步骤 <a class="header-anchor" href="#配置步骤" aria-label="Permalink to &quot;配置步骤&quot;">​</a></h2><h3 id="_1-配置插件" tabindex="-1">1. 配置插件 <a class="header-anchor" href="#_1-配置插件" aria-label="Permalink to &quot;1. 配置插件&quot;">​</a></h3><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">  &quot;token&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;ghp_xxxxxxxxxxxxxxxxxxxx&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">  &quot;repositories&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">      &quot;owner&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;koishi-shangxue-plugins&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">      &quot;repo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;koishi-plugin-adapter-github&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">  &quot;mode&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;webhook&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">  &quot;webhookPath&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;/github/webhook&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">  &quot;webhookSecret&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;your-secret-key&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><h3 id="_2-在-github-配置-webhook" tabindex="-1">2. 在 GitHub 配置 Webhook <a class="header-anchor" href="#_2-在-github-配置-webhook" aria-label="Permalink to &quot;2. 在 GitHub 配置 Webhook&quot;">​</a></h3><p><img src="https://github.com/koishi-shangxue-plugins/koishi-plugin-adapter-github/blob/docs/docs/public/2026-02-11_18-50-53.png?raw=true" alt="alt"></p><ol><li>打开你的 GitHub 仓库</li><li>进入 <strong>Settings</strong> → <strong>Webhooks</strong> → <strong>Add webhook</strong></li><li>填写配置：</li></ol><h4 id="payload-url" tabindex="-1">Payload URL <a class="header-anchor" href="#payload-url" aria-label="Permalink to &quot;Payload URL&quot;">​</a></h4><div class="language-url vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">url</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>http://你的服务器地址:端口/github/webhook</span></span></code></pre></div><p>示例：</p><ul><li><code>http://example.com:5140/github/webhook</code></li><li><code>https://bot.example.com/github/webhook</code></li></ul><h4 id="content-type" tabindex="-1">Content type <a class="header-anchor" href="#content-type" aria-label="Permalink to &quot;Content type&quot;">​</a></h4><p>选择 <code>application/json</code></p><h4 id="secret" tabindex="-1">Secret <a class="header-anchor" href="#secret" aria-label="Permalink to &quot;Secret&quot;">​</a></h4><p>填写你在插件中配置的 <code>webhookSecret</code>（强烈推荐）</p><h4 id="which-events-would-you-like-to-trigger-this-webhook" tabindex="-1">Which events would you like to trigger this webhook? <a class="header-anchor" href="#which-events-would-you-like-to-trigger-this-webhook" aria-label="Permalink to &quot;Which events would you like to trigger this webhook?&quot;">​</a></h4><p>选择 <strong>Let me select individual events</strong>，勾选：</p><ul><li><p>✅ Issues</p></li><li><p>✅ Issue comments</p></li><li><p>✅ Pull requests</p></li><li><p>✅ Pull request reviews</p></li><li><p>✅ Pull request review comments</p></li><li><p>✅ Discussions</p></li><li><p>✅ Discussion comments</p><p>点击 <strong>Add webhook</strong> 完成配置</p></li></ul><h4 id="优势" tabindex="-1">优势 <a class="header-anchor" href="#优势" aria-label="Permalink to &quot;优势&quot;">​</a></h4><p>✅ <strong>实时性强</strong> - 事件发生后立即推送，延迟极低</p><p>✅ <strong>完整事件支持</strong> - 支持所有 GitHub 事件类型</p><p>✅ <strong>资源占用少</strong> - 无需定时轮询，节省服务器资源</p><p>✅ <strong>无 API 配额限制</strong> - 不消耗 GitHub API 配额</p><h4 id="限制" tabindex="-1">限制 <a class="header-anchor" href="#限制" aria-label="Permalink to &quot;限制&quot;">​</a></h4><p>⚠️ <strong>需要公网 IP</strong> - 本地开发环境需要使用内网穿透工具</p><p>⚠️ <strong>配置复杂</strong> - 需要在 GitHub 配置 Webhook</p><p>⚠️ <strong>不支持代理</strong> - Webhook 是被动接收，无法使用代理</p><h2 id="支持的事件类型" tabindex="-1">支持的事件类型 <a class="header-anchor" href="#支持的事件类型" aria-label="Permalink to &quot;支持的事件类型&quot;">​</a></h2><p>Webhook 模式支持所有 GitHub 事件类型：</p><ul><li>✅ <strong>IssuesEvent</strong> - Issue 创建、关闭、重新打开</li><li>✅ <strong>IssueCommentEvent</strong> - Issue 评论</li><li>✅ <strong>PullRequestEvent</strong> - PR 创建、关闭、重新打开、合并</li><li>✅ <strong>PullRequestReviewCommentEvent</strong> - PR 审查评论</li><li>✅ <strong>DiscussionEvent</strong> - Discussion 创建、关闭、重新打开</li><li>✅ <strong>DiscussionCommentEvent</strong> - Discussion 评论</li></ul>`,37)])])}const g=i(o,[["render",n]]);export{d as __pageData,g as default};
